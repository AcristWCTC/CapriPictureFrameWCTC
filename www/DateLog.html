<!DOCTYPE html>
<html>

    <head>
        <link href="css/capriPictureFrame.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" /> 
        <link href="css/capriPictureFrame.css" rel="stylesheet" type="text/css"/>
        <title>Date Log</title>
    </head>
    <body class="DateLog">
        <header>
            <div class="dropdown">
                <button onclick="myFunction()" class="dropbtn">Menu</button>
                <div id="myDropdown" class="dropdown-content">
                    <a style="font-weight: bold" href="home.html">Home</a>
                    <a style="font-weight: bold" href="addEdit.html">Photos</a>
                    <a style="font-weight: bold" href="addEditLog.html">Logs</a>
                </div>
            </div>
            <h1 class="center">Capri Picture Frame</h1>
        </header>
        <form method="POST">

            <textarea id="log" rows="15" cols="35"></textarea>
            <br>
            <button type="button" class="btn btn-primary btn-lg" onclick="uploadLog();">Submit</button>
            <button type="button" class="btn btn-danger btn-lg"><a href="addEditLog.html">Cancel</a></button>
        </form>
        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        <script src="https://code.jquery.com/jquery-latest.min.js"></script>
        <script src="js/uploadImage.js" type="text/javascript"></script>
        <script>
                function uploadLog() {
                    $.ajax({
                        type: 'POST',
                        url: 'http://m.capripictureframe.com/api/logs',
                        contentType: 'application/json',
                        dataType: 'json',
                        data: formToJSON(),
                        success: function (data) {
                            console.log(data);
                        },
                        error: function (jqXHR, textStatus, error) {
                            if (jqXHR.status === 201 || jqXHR.status === 200) {
                                console.log("Success");
                            } else {
                                console.log("Error: " + error);
                            }
                        }
                    });
                }

                function formToJSON() {
                    var today = new Date();
                    var textBox = $('#log').val();
                    return JSON.stringify({
                        "resident_id": 35,
                        "log_date": today,
                        "log_text": textBox
                    });
                }
        </script>


    </body>
</html>